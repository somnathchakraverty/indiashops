(self.AMP = self.AMP || []).push({n:"amp-pinterest", f:(function(AMP) {function e(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d]};Date.now();self.log=self.log||{user:null,dev:null};var g=self.log;function h(){if(g.user)return g.user;throw Error("failed to call initLogConstructor");};function l(a,b,c,d){var f;try{f=a.open(b,c,d)}catch(m){var k;if(g.dev)k=g.dev;else throw Error("failed to call initLogConstructor");k.error("DOM","Failed to open url on target: ",c,m)}f||"_top"==c||(f=a.open(b,"_top"))};function n(a){a=a.__AMP_TOP||a;var b=a.services&&a.services.xhr&&a.services.xhr.obj;return b};var p,q;
function r(a){if("string"==typeof a){p||(p=self.document.createElement("a"),q=self.UrlCache||(self.UrlCache=Object.create(null)));var b=q[a];if(b)a=b;else{p.href=a;p.protocol||(p.href=p.href);b={href:p.href,protocol:p.protocol,host:p.host,hostname:p.hostname,port:"0"==p.port?"":p.port,pathname:p.pathname,search:p.search,hash:p.hash,origin:null};"/"!==b.pathname[0]&&(b.pathname="/"+b.pathname);if("http:"==b.protocol&&80==b.port||"https:"==b.protocol&&443==b.port)b.port="",b.host=b.hostname;b.origin=
p.origin&&"null"!=p.origin?p.origin:"data:"!=b.protocol&&b.host?b.protocol+"//"+b.host:b.href;a=q[a]=b}}(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}
function t(a){var b,c;c=void 0===c?"source":c;h().assert(null!=a,"%s %s must be available",b,c);var d=a;h().assert(r(d)||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,d);return d};for(var u="",i=0;12>i;i+=1)u+="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ_abcdefghijkmnopqrstuvwxyz".substr(Math.floor(60*Math.random()),1);function v(a){var b,c;c=b="";try{b=decodeURIComponent(a)}catch(d){}c=b.replace(/</g,"&lt;");return c=c.replace(/>/g,"&gt;")}var w=u;function z(a){var b=new Image,c="https://log.pinterest.com/?guid="+u,c=c+"&amp=1";a&&(c+=a);c=c+"&via="+encodeURIComponent(window.location.href);b.src=c}
function A(a,b){var c=!1,d,f;for(d in b){c=a.createElement(d);for(f in b[d])if("string"===typeof b[d][f]){a=c;var k=f,m=b[d][f];"string"===typeof a[k]?a[k]=m:a.setAttribute(k,m)}break}return c};function C(a){h().assert(a.getAttribute("data-href"),"The data-href attribute is required for follow buttons");h().assert(a.getAttribute("data-label"),"The data-label attribute is required for follow buttons");this.element=a;this.label=a.getAttribute("data-label");this.href=t(a.getAttribute("data-href"))}
C.prototype.handleClick=function(a){a.preventDefault();l(window,this.href,"pin"+Date.now(),"status=no,resizable=yes,scrollbars=yes,\n  personalbar=no,directories=no,location=no,toolbar=no,\n  menubar=no,width=1040,height=640,left=0,top=0");z("&type=button_follow&href="+this.href)};
C.prototype.renderTemplate=function(){var a=A(this.element.ownerDocument,{a:{class:"-amp-pinterest-follow-button",href:this.href,textContent:this.label}});a.appendChild(A(this.element.ownerDocument,{i:{}}));a.onclick=this.handleClick.bind(this);return a};C.prototype.render=function(){"/"!==this.href.substr(-1)&&(this.href+="/");this.href+="pins/follow/?guid="+w;return Promise.resolve(this.renderTemplate())};function D(a){h().assert(a.getAttribute("data-url"),"The data-url attribute is required for Pin It buttons");h().assert(a.getAttribute("data-media"),"The data-media attribute is required for Pin It buttons");h().assert(a.getAttribute("data-description"),"The data-description attribute is required for Pin It buttons");this.element=a;this.xhr=n(a.ownerDocument.defaultView);this.color=a.getAttribute("data-color");this.count=a.getAttribute("data-count");this.lang=a.getAttribute("data-lang");this.round=
a.getAttribute("data-round");this.tall=a.getAttribute("data-tall");this.description=a.getAttribute("data-description")}D.prototype.handleClick=function(a){a.preventDefault();l(window,this.href,"_pinit","status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=900,height=500,left=0,top=0");z("&type=button_pinit")};
D.prototype.fetchCount=function(){return this.xhr.fetchJson("https://widgets.pinterest.com/v1/urls/count.json?return_jsonp=false&url="+this.url)};D.prototype.formatPinCount=function(a){999<a&&(a=1E6>a?parseInt(a/1E3,10)+"K+":1E9>a?parseInt(a/1E6,10)+"M+":"++");return a};D.prototype.renderCount=function(a,b){z("&type=pidget&button_count=1");return A(this.element.ownerDocument,{span:{class:"-amp-pinterest-bubble-"+this.count+b,textContent:this.formatPinCount(a)}})};
D.prototype.renderTemplate=function(a){var b={shape:this.round?"-round":"-rect",height:this.tall?"-tall":"",lang:"ja"===this.lang?"-ja":"-en",color:-1!==["red","white"].indexOf(this.color)?this.color:"gray"},c=["-amp-pinterest"+b.shape+b.height,"-amp-fill-content"],d="";this.round||(c.push("-amp-pinterest"+b.lang+"-"+b.color+b.height),a&&(c.push("-amp-pinterest-count-pad-"+this.count+b.height),d=this.renderCount(a.count,b.height)));var f=A(this.element.ownerDocument,{a:{class:c.join(" "),href:this.href}});
d&&f.appendChild(d);f.onclick=this.handleClick.bind(this);return f};
D.prototype.render=function(){this.description=encodeURIComponent(this.description);this.media=encodeURIComponent(this.element.getAttribute("data-media"));this.url=encodeURIComponent(this.element.getAttribute("data-url"));this.href="https://www.pinterest.com/pin/create/button/?"+["amp=1","guid="+w,"url="+this.url,"media="+this.media,"description="+this.description].join("&");var a;a="above"===this.count||"beside"===this.count?this.fetchCount():Promise.resolve();return a.then(this.renderTemplate.bind(this))};function E(a){h().assert(a.getAttribute("data-url"),"The data-url attribute is required for Pin widgets");this.element=a;this.xhr=n(a.ownerDocument.defaultView)}
E.prototype.handleClick=function(a){a.preventDefault();a=a.target;var b=a.getAttribute("data-pin-pop")||!1,c=a.getAttribute("data-pin-href"),d=a.getAttribute("data-pin-log");c&&(b?l(window,c,"_pinit","status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=900,height=500,left=0,top=0"):l(window,c+"?amp=1&guid="+w,"_blank"));d&&z("&type="+d)};
E.prototype.fetchPin=function(){return this.xhr.fetchJson("https://widgets.pinterest.com/v3/pidgets/pins/info/?"+("pin_ids="+this.pinId+"&sub=www&base_scheme=https")).then(function(a){try{return a.data[0]}catch(b){return null}})};
E.prototype.renderPin=function(a){var b="-amp-pinterest-embed-pin",c=t(a.images["237x"].url);"medium"===this.width||"large"===this.width?(b+="-medium",c=c.replace(/237/,"345"),z("&type=pidget&pin_count_medium=1")):z("&type=pidget&pin_count=1");var d=A(this.element.ownerDocument,{span:{}});d.className=b+" -amp-fill-content";var f=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-inner","data-pin-log":"embed_pin"}}),b=A(this.element.ownerDocument,{img:{src:c,className:"-amp-pinterest-embed-pin-image",
"data-pin-no-hover":!0,"data-pin-href":"https://www.pinterest.com/pin/"+a.id+"/","data-pin-log":"embed_pin_img"}});f.appendChild(b);var k=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-rect -amp-pinterest-en-red -amp-pinterest-embed-pin-repin","data-pin-log":"embed_pin_repin","data-pin-pop":"1","data-pin-href":"https://www.pinterest.com/pin/"+a.id+"/repin/x/?amp=1&guid="+w}});f.appendChild(k);b=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text"}});if(a.description){var m=
A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-description",textContent:v(a.description)}});b.appendChild(m)}if(a.attribution){var x=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-attribution"}});x.appendChild(A(this.element.ownerDocument,{img:{className:"-amp-pinterest-embed-pin-text-icon-attrib",src:a.attribution.provider_icon_url}}));x.appendChild(A(this.element.ownerDocument,
{span:{textContent:" by "}}));x.appendChild(A(this.element.ownerDocument,{span:{"data-pin-href":a.attribution.url,textContent:v(a.attribution.author_name)}}));b.appendChild(x)}if(a.repin_count||a.like_count){var B=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-stats"}});if(a.repin_count){var G=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-stats-repins",textContent:String(a.repin_count)}});B.appendChild(G)}if(a.like_count){var H=
A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-stats-likes",textContent:String(a.like_count)}});B.appendChild(H)}b.appendChild(B)}if(a.pinner){var y=A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-pinner"}});y.appendChild(A(this.element.ownerDocument,{img:{className:"-amp-pinterest-embed-pin-pinner-avatar",alt:v(a.pinner.full_name),title:v(a.pinner.full_name),src:a.pinner.image_small_url,"data-pin-href":a.pinner.profile_url}}));
y.appendChild(A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-pinner-name",textContent:v(a.pinner.full_name),"data-pin-href":a.pinner.profile_url}}));y.appendChild(A(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-board-name",textContent:v(a.board.name),"data-pin-href":"https://www.pinterest.com/"+a.board.url}}));b.appendChild(y)}f.appendChild(b);d.appendChild(f);d.addEventListener("click",this.handleClick.bind(this));return d};
E.prototype.render=function(){this.pinUrl=this.element.getAttribute("data-url");this.width=this.element.getAttribute("data-width");this.pinId="";try{this.pinId=this.pinUrl.split("/pin/")[1].split("/")[0]}catch(a){return}return this.fetchPin().then(this.renderPin.bind(this))};function F(a){AMP.BaseElement.apply(this,arguments)}e(F,AMP.BaseElement);F.prototype.preconnectCallback=function(a){this.preconnect.url("https://widgets.pinterest.com",a)};F.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a};F.prototype.layoutCallback=function(){var a=this,b=h().assert(this.element.getAttribute("data-do"),"The data-do attribute is required for <amp-pinterest> %s",this.element);return this.render(b).then(function(b){return a.element.appendChild(b)})};
F.prototype.render=function(a){switch(a){case "embedPin":return(new E(this.element)).render();case "buttonPin":return(new D(this.element)).render();case "buttonFollow":return(new C(this.element)).render()}return Promise.resolve("Invalid selector: ",a)};AMP.registerElement("amp-pinterest",F,".-amp-pinterest-round{height:16px;width:16px;background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_round_red_16_2.png);background-size:16px 16px}.-amp-pinterest-round-tall{height:32px;width:32px;background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_round_red_32_2.png);background-size:32px 32px}.-amp-pinterest-rect{height:20px;width:40px;background:url() 0 -20px no-repeat;background-size:40px 60px}.-amp-pinterest-rect:hover{background-position:0 0}.-amp-pinterest-rect:active{background-position:0 -40px}.-amp-pinterest-en-gray{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_gray_20_2.png)}.-amp-pinterest-en-red{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_red_20_2.png)}.-amp-pinterest-en-white{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_white_20_2.png)}.-amp-pinterest-ja-gray{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_gray_20_2.png)}.-amp-pinterest-ja-red{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_red_20_2.png)}.-amp-pinterest-ja-white{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_white_20_2.png)}.-amp-pinterest-rect-tall{height:28px;width:56px;background:url() 0 -28px no-repeat;background-size:56px 84px}.-amp-pinterest-rect-tall:hover{background-position:0 0}.-amp-pinterest-rect-tall:active{background-position:0 -56px}.-amp-pinterest-en-gray-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_gray_28_2.png)}.-amp-pinterest-en-red-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_red_28_2.png)}.-amp-pinterest-en-white-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_white_28_2.png)}.-amp-pinterest-ja-gray-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_gray_28_2.png)}.-amp-pinterest-ja-red-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_red_28_2.png)}.-amp-pinterest-ja-white-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_white_28_2.png)}.-amp-pinterest-count-pad-above{margin-top:30px}.-amp-pinterest-count-pad-above-tall{margin-top:38px}.-amp-pinterest-bubble-above{bottom:21px;height:29px;width:40px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_north_white_rect_20_2.png) 0 0 no-repeat;background-size:40px 29px;font:12px Arial,Helvetica,sans-serif;line-height:24px}.-amp-pinterest-bubble-above,.-amp-pinterest-bubble-above-tall{position:absolute;left:0;text-align:center;text-decoration:none;color:#777}.-amp-pinterest-bubble-above-tall{bottom:29px;height:37px;width:56px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_north_white_rect_28_2.png) 0 0 no-repeat;background-size:56px 37px;font:15px Arial,Helvetica,sans-serif;line-height:28px}.-amp-pinterest-count-pad-beside{width:86px}.-amp-pinterest-count-pad-beside-tall{width:120px}.-amp-pinterest-bubble-beside{height:20px;width:45px;text-indent:5px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_east_white_rect_20_2.png) 0 0 no-repeat;background-size:45px 20px;font:12px Arial,Helvetica,sans-serif;line-height:20px}.-amp-pinterest-bubble-beside,.-amp-pinterest-bubble-beside-tall{position:absolute;top:0;right:0;text-align:center;text-decoration:none;color:#777}.-amp-pinterest-bubble-beside-tall{height:28px;width:63px;text-indent:7px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_east_white_rect_28_2.png) 0 0 no-repeat;background-size:63px 28px;font:15px Arial,Helvetica,sans-serif;line-height:28px}.-amp-pinterest-follow-button{background:transparent url(https://s-passets.pinimg.com/images/pidgets/bfs2.png) 0 0 no-repeat;background-size:200px 60px;border-right:1px solid #d0d0d0;border-radius:4px;color:#444;cursor:pointer;display:inline-block;font:700 normal normal 11px/20px Helvetica Neue,helvetica,arial,san-serif;padding-right:3px;position:relative;text-decoration:none;text-indent:20px}.-amp-pinterest-follow-button:hover{background-position:0 -20px;border-right-color:#919191}.-amp-pinterest-follow-button i{background-image:url(https://s-passets.pinimg.com/images/pidgets/log2.png);background-size:14px 14px;height:14px;left:3px;position:absolute;top:3px;width:14px}.-amp-pinterest-embed-pin,.-amp-pinterest-embed-pin-medium{padding:5px;width:237px}.-amp-pinterest-embed-pin-medium{width:345px}.-amp-pinterest-embed-pin-inner{display:block;position:relative;-webkit-font-smoothing:antialiased;cursor:pointer;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.33);border-radius:3px;width:100%}.-amp-pinterest-embed-pin-text{color:#a8a8a8;white-space:normal;font-family:Helvetica Neue,arial,sans-serif;font-size:11px;line-height:18px;font-weight:700}.-amp-pinterest-embed-pin-image{border-radius:3px 3px 0 0}.-amp-pinterest-embed-pin-text-block{display:block;line-height:30px;padding:0 12px}.-amp-pinterest-embed-pin-text-icon-attrib{height:16px;width:16px;vertical-align:middle}.-amp-pinterest-embed-pin-stats{height:16px;line-height:16px;padding:8px 12px}.-amp-pinterest-embed-pin-stats-likes{padding-left:14px;background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAAAAAClR+AmAAAAUElEQVR4AT2HMQpFIQwEc/+zbXhFLBW8QUihIAT2E8Q/xe6M0Jv2zK7NKUcBzAlAjzjqtdZl4c8S2nOjMPS6BoWMr/wLVnAbYJs3mGMkXzx+OeRqUf5HHRoAAAAASUVORK5CYII=) 0 2px no-repeat}.-amp-pinterest-embed-pin-stats-repins{padding:0 10px 0 18px;background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAALCAAAAABq7uO+AAAASklEQVQI10WNMQrAMBRCvf/Z3pQcImPplsIPdqhNXOSJqLxVtnWQsuUO9IM3cHlV8dSSDZQHAOPH2YA2FU+qtH7MRhaVh/xt/PQCEW6N4EV+CPEAAAAASUVORK5CYII=) 0 0 no-repeat}.-amp-pinterest-embed-pin-description{color:#363636;font-weight:400;font-size:14px;line-height:17px;padding-top:5px}.-amp-pinterest-embed-pin-pinner{padding:12px;border-top:1px solid rgba(0,0,0,.09)}.-amp-pinterest-embed-pin-pinner-avatar{border-radius:15px;border:none;height:30px;width:30px;vertical-align:middle;margin:0 8px 12px 0;float:left}.-amp-pinterest-embed-pin-board-name,.-amp-pinterest-embed-pin-pinner-name{display:block;height:15px;line-height:15px}.-amp-pinterest-embed-pin-pinner-name{color:#777}.-amp-pinterest-embed-pin-repin{position:absolute;top:12px;left:12px;cursor:pointer}\n/*# sourceURL=/extensions/amp-pinterest/0.1/amp-pinterest.css*/");
})});
//# sourceMappingURL=amp-pinterest-0.1.js.map

